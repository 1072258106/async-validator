{"version":3,"sources":["webpack:///./examples/simple.js","webpack:///./index.js","webpack:///./src/index.js","webpack:///./src/util.js","webpack:///./~/process/browser.js","webpack:///./src/validator/index.js","webpack:///./src/validator/string.js","webpack:///./src/rule/index.js","webpack:///./src/rule/required.js","webpack:///./src/rule/whitespace.js","webpack:///./src/rule/type.js","webpack:///./src/rule/range.js","webpack:///./src/rule/enum.js","webpack:///./src/rule/pattern.js","webpack:///./src/validator/method.js","webpack:///./src/validator/number.js","webpack:///./src/validator/boolean.js","webpack:///./src/validator/regexp.js","webpack:///./src/validator/integer.js","webpack:///./src/validator/float.js","webpack:///./src/validator/array.js","webpack:///./src/validator/object.js","webpack:///./src/validator/enum.js","webpack:///./src/validator/pattern.js","webpack:///./src/validator/type.js","webpack:///./src/validator/date.js","webpack:///./src/validator/required.js","webpack:///./src/messages.js"],"names":["schema","name","type","required","min","max","address","fields","province","city","message","async","validator","rule","value","callback","setTimeout","Error","validate","errors","console","log","module","exports","require","Schema","descriptor","rules","_messages","define","prototype","messages","Array","isArray","z","item","hasOwnProperty","source_","o","oc","source","options","Object","keys","length","complete","results","i","field","add","e","concat","apply","push","error","arr","series","forEach","r","transform","getValidationMethod","fullField","getType","errorFields","data","doIt","deep","defaultField","addFullfield","key","cb","map","first","fieldFirst","fieldsSchema","k","f","fieldSchema","bind","errs","undefined","pattern","RegExp","messageIndex","indexOf","splice","register","warning","format","isEmptyValue","isEmptyObject","asyncMap","complementError","deepMerge","formatRegExp","warning2","process","env","NODE_ENV","warn","every","args","len","slice","str","String","replace","x","Number","JSON","stringify","_","arg","isNativeStringType","obj","asyncParallelArray","func","total","arrLength","count","a","asyncSerialArray","index","next","original","flattenObjArr","objArr","ret","option","flattenArr","firstFields","objArrKeys","objArrLength","oe","target","s","string","method","number","boolean","regexp","integer","float","array","object","enum","email","url","date","hex","range","whitespace","util","test","types","parseInt","getTime","getMonth","getYear","isNaN","match","custom","ruleType","val","num","ENUM","enumerable","join","mismatch","floatFn","newMessages","default","parse","invalid","clone","cloned"],"mappings":"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","file":"simple.js","sourcesContent":["/* eslint no-console:0 */\n\nimport Schema from 'async-validator';\n\nconst schema = new Schema({\n  name: {\n    type: 'string',\n    required: true,\n    min: 5,\n    max: 10,\n  },\n  address: {\n    type: 'object',\n    required: true,\n    fields: {\n      province: {\n        type: 'string',\n        required: true,\n        min: 4,\n      },\n      city: {\n        type: 'string',\n        message: 'custom message',\n        min: 5,\n      },\n      async: {\n        validator(rule, value, callback) {\n          setTimeout(() => {\n            callback(rule.message);\n          }, 100);\n        },\n        message: 'address async fails',\n      },\n    },\n  },\n  async: {\n    validator(rule, value, callback) {\n      setTimeout(() => {\n        callback([new Error(rule.message)]);\n      }, 100);\n    },\n    message: 'async fails',\n  },\n});\n\nschema.validate({\n  name: 2,\n  address: {\n    city: 2,\n  },\n  async: '2',\n}, (errors, fields) => {\n  console.log('errors');\n  console.log(errors);\n  console.log('fields');\n  console.log(fields);\n});\n\nconsole.log('end');\n\n\n\n// WEBPACK FOOTER //\n// ./examples/simple.js","module.exports = require('./src/');\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { format, complementError, asyncMap, warning, deepMerge } from './util';\nimport validators from './validator/';\nimport { messages as defaultMessages, newMessages } from './messages';\nimport { error } from './rule/';\n\n/**\n *  Encapsulates a validation schema.\n *\n *  @param descriptor An object declaring validation rules\n *  for this schema.\n */\nfunction Schema(descriptor) {\n  this.rules = null;\n  this._messages = defaultMessages;\n  this.define(descriptor);\n}\n\nSchema.prototype = {\n  messages(messages) {\n    if (messages) {\n      this._messages = deepMerge(newMessages(), messages);\n    }\n    return this._messages;\n  },\n  define(rules) {\n    if (!rules) {\n      throw new Error(\n        'Cannot configure a schema with no rules');\n    }\n    if (typeof rules !== 'object' || Array.isArray(rules)) {\n      throw new Error('Rules must be an object');\n    }\n    this.rules = {};\n    let z;\n    let item;\n    for (z in rules) {\n      if (rules.hasOwnProperty(z)) {\n        item = rules[z];\n        this.rules[z] = Array.isArray(item) ? item : [item];\n      }\n    }\n  },\n  validate(source_, o = {}, oc) {\n    let source = source_;\n    let options = o;\n    let callback = oc;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!this.rules || Object.keys(this.rules).length === 0) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n    function complete(results) {\n      let i;\n      let field;\n      let errors = [];\n      let fields = {};\n\n      function add(e) {\n        if (Array.isArray(e)) {\n          errors = errors.concat.apply(errors, e);\n        } else {\n          errors.push(e);\n        }\n      }\n\n      for (i = 0; i < results.length; i++) {\n        add(results[i]);\n      }\n      if (!errors.length) {\n        errors = null;\n        fields = null;\n      } else {\n        for (i = 0; i < errors.length; i++) {\n          field = errors[i].field;\n          fields[field] = fields[field] || [];\n          fields[field].push(errors[i]);\n        }\n      }\n      callback(errors, fields);\n    }\n\n    if (options.messages) {\n      let messages = this.messages();\n      if (messages === defaultMessages) {\n        messages = newMessages();\n      }\n      deepMerge(messages, options.messages);\n      options.messages = messages;\n    } else {\n      options.messages = this.messages();\n    }\n\n    options.error = error;\n    let arr;\n    let value;\n    const series = {};\n    const keys = options.keys || Object.keys(this.rules);\n    keys.forEach((z) => {\n      arr = this.rules[z];\n      value = source[z];\n      arr.forEach((r) => {\n        let rule = r;\n        if (typeof (rule.transform) === 'function') {\n          if (source === source_) {\n            source = { ...source };\n          }\n          value = source[z] = rule.transform(value);\n        }\n        if (typeof (rule) === 'function') {\n          rule = {\n            validator: rule,\n          };\n        } else {\n          rule = { ...rule };\n        }\n        rule.validator = this.getValidationMethod(rule);\n        rule.field = z;\n        rule.fullField = rule.fullField || z;\n        rule.type = this.getType(rule);\n        if (!rule.validator) {\n          return;\n        }\n        series[z] = series[z] || [];\n        series[z].push({\n          rule,\n          value,\n          source,\n          field: z,\n        });\n      });\n    });\n    const errorFields = {};\n    asyncMap(series, options, (data, doIt) => {\n      const rule = data.rule;\n      let deep = (rule.type === 'object' || rule.type === 'array') &&\n        (typeof (rule.fields) === 'object' || typeof (rule.defaultField) === 'object');\n      deep = deep && (rule.required || (!rule.required && data.value));\n      rule.field = data.field;\n      function addFullfield(key, schema) {\n        return {\n          ...schema,\n          fullField: `${rule.fullField}.${key}`,\n        };\n      }\n\n      function cb(e = []) {\n        let errors = e;\n        if (!Array.isArray(errors)) {\n          errors = [errors];\n        }\n        if (errors.length) {\n          warning('async-validator:', errors);\n        }\n        if (errors.length && rule.message) {\n          errors = [].concat(rule.message);\n        }\n\n        errors = errors.map(complementError(rule));\n\n        if ((options.first || options.fieldFirst) && errors.length) {\n          errorFields[rule.field] = 1;\n          return doIt(errors);\n        }\n        if (!deep) {\n          doIt(errors);\n        } else {\n          // if rule is required but the target object\n          // does not exist fail at the rule level and don't\n          // go deeper\n          if (rule.required && !data.value) {\n            if (rule.message) {\n              errors = [].concat(rule.message).map(complementError(rule));\n            } else {\n              errors = [options.error(rule, format(options.messages.required, rule.field))];\n            }\n            return doIt(errors);\n          }\n\n          let fieldsSchema = {};\n          if (rule.defaultField) {\n            for (const k in data.value) {\n              if (data.value.hasOwnProperty(k)) {\n                fieldsSchema[k] = rule.defaultField;\n              }\n            }\n          }\n          fieldsSchema = {\n            ...fieldsSchema,\n            ...data.rule.fields,\n          };\n          for (const f in fieldsSchema) {\n            if (fieldsSchema.hasOwnProperty(f)) {\n              const fieldSchema = Array.isArray(fieldsSchema[f]) ?\n                fieldsSchema[f] : [fieldsSchema[f]];\n              fieldsSchema[f] = fieldSchema.map(addFullfield.bind(null, f));\n            }\n          }\n          const schema = new Schema(fieldsSchema);\n          schema.messages(options.messages);\n          if (data.rule.options) {\n            data.rule.options.messages = options.messages;\n            data.rule.options.error = options.error;\n          }\n          schema.validate(data.value, data.rule.options || options, (errs) => {\n            doIt(errs && errs.length ? errors.concat(errs) : errs);\n          });\n        }\n      }\n\n      rule.validator(\n        rule, data.value, cb, data.source, options);\n    }, (results) => {\n      complete(results);\n    });\n  },\n  getType(rule) {\n    if (rule.type === undefined && (rule.pattern instanceof RegExp)) {\n      rule.type = 'pattern';\n    }\n    if (typeof (rule.validator) !== 'function' &&\n      (rule.type && !validators.hasOwnProperty(rule.type))) {\n      throw new Error(format('Unknown rule type %s', rule.type));\n    }\n    return rule.type || 'string';\n  },\n  getValidationMethod(rule) {\n    if (typeof rule.validator === 'function') {\n      return rule.validator;\n    }\n    const keys = Object.keys(rule);\n    const messageIndex = keys.indexOf('message');\n    if (messageIndex !== -1) {\n      keys.splice(messageIndex, 1);\n    }\n    if (keys.length === 1 && keys[0] === 'required') {\n      return validators.required;\n    }\n    return validators[this.getType(rule)] || false;\n  },\n};\n\nSchema.register = function register(type, validator) {\n  if (typeof validator !== 'function') {\n    throw new Error('Cannot register a validator by type, validator is not a function');\n  }\n  validators[type] = validator;\n};\n\nSchema.messages = defaultMessages;\n\nexport default Schema;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const formatRegExp = /%[sdj%]/g;\n\nlet warning2 = () => {\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning2 = (type, message) => {\n    if (typeof console !== 'undefined' && console.warn) {\n      console.warn(type, message);\n    }\n  };\n}\n\nexport function warning(type, errors) {\n  // only warn native warning, default type is string, confuses many people...\n  if (errors.every(e => typeof e === 'string')) {\n    warning2(type, errors);\n  }\n}\n\nexport function format(...args) {\n  let i = 1;\n  const f = args[0];\n  const len = args.length;\n  if (typeof f === 'function') {\n    return f.apply(null, args.slice(1));\n  }\n  if (typeof f === 'string') {\n    let str = String(f).replace(formatRegExp, (x) => {\n      if (x === '%%') {\n        return '%';\n      }\n      if (i >= len) {\n        return x;\n      }\n      switch (x) {\n        case '%s':\n          return String(args[i++]);\n        case '%d':\n          return Number(args[i++]);\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n          break;\n        default:\n          return x;\n      }\n    });\n    for (let arg = args[i]; i < len; arg = args[++i]) {\n      str += ` ${arg}`;\n    }\n    return str;\n  }\n  return f;\n}\n\nfunction isNativeStringType(type) {\n  return type === 'string' || type === 'url' || type === 'hex' || type === 'email';\n}\n\nexport function isEmptyValue(value, type) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n  if (type === 'array' && Array.isArray(value) && !value.length) {\n    return true;\n  }\n  if (isNativeStringType(type) && typeof value === 'string' && !value) {\n    return true;\n  }\n  return false;\n}\n\nexport function isEmptyObject(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nfunction asyncParallelArray(arr, func, callback) {\n  const results = [];\n  let total = 0;\n  const arrLength = arr.length;\n\n  function count(errors) {\n    results.push.apply(results, errors);\n    total++;\n    if (total === arrLength) {\n      callback(results);\n    }\n  }\n\n  arr.forEach((a) => {\n    func(a, count);\n  });\n}\n\nfunction asyncSerialArray(arr, func, callback) {\n  let index = 0;\n  const arrLength = arr.length;\n\n  function next(errors) {\n    if (errors && errors.length) {\n      callback(errors);\n      return;\n    }\n    const original = index;\n    index = index + 1;\n    if (original < arrLength) {\n      func(arr[original], next);\n    } else {\n      callback([]);\n    }\n  }\n\n  next([]);\n}\n\nfunction flattenObjArr(objArr) {\n  const ret = [];\n  Object.keys(objArr).forEach((k) => {\n    ret.push.apply(ret, objArr[k]);\n  });\n  return ret;\n}\n\nexport function asyncMap(objArr, option, func, callback) {\n  if (option.first) {\n    const flattenArr = flattenObjArr(objArr);\n    return asyncSerialArray(flattenArr, func, callback);\n  }\n  let firstFields = option.firstFields || [];\n  if (firstFields === true) {\n    firstFields = Object.keys(objArr);\n  }\n  const objArrKeys = Object.keys(objArr);\n  const objArrLength = objArrKeys.length;\n  let total = 0;\n  const results = [];\n  const next = (errors) => {\n    results.push.apply(results, errors);\n    total++;\n    if (total === objArrLength) {\n      callback(results);\n    }\n  };\n  objArrKeys.forEach((key) => {\n    const arr = objArr[key];\n    if (firstFields.indexOf(key) !== -1) {\n      asyncSerialArray(arr, func, next);\n    } else {\n      asyncParallelArray(arr, func, next);\n    }\n  });\n}\n\nexport function complementError(rule) {\n  return (oe) => {\n    if (oe && oe.message) {\n      oe.field = oe.field || rule.fullField;\n      return oe;\n    }\n    return {\n      message: oe,\n      field: oe.field || rule.fullField,\n    };\n  };\n}\n\nexport function deepMerge(target, source) {\n  if (source) {\n    for (const s in source) {\n      if (source.hasOwnProperty(s)) {\n        const value = source[s];\n        if (typeof value === 'object' && typeof target[s] === 'object') {\n          target[s] = {\n            ...target[s],\n            ...value,\n          };\n        } else {\n          target[s] = value;\n        }\n      }\n    }\n  }\n  return target;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 5\n// module chunks = 0","module.exports = {\n  string: require('./string'),\n  method: require('./method'),\n  number: require('./number'),\n  boolean: require('./boolean'),\n  regexp: require('./regexp'),\n  integer: require('./integer'),\n  float: require('./float'),\n  array: require('./array'),\n  object: require('./object'),\n  enum: require('./enum'),\n  pattern: require('./pattern'),\n  email: require('./type'),\n  url: require('./type'),\n  date: require('./date'),\n  hex: require('./type'),\n  required: require('./required'),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/index.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Performs validation for string types.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction string(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options, 'string');\n    if (!isEmptyValue(value, 'string')) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n      rules.pattern(rule, value, source, errors, options);\n      if (rule.whitespace === true) {\n        rules.whitespace(rule, value, source, errors, options);\n      }\n    }\n  }\n  callback(errors);\n}\n\nexport default string;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/string.js","export default {\n  required: require('./required'),\n  whitespace: require('./whitespace'),\n  type: require('./type'),\n  range: require('./range'),\n  enum: require('./enum'),\n  pattern: require('./pattern'),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/index.js","import * as util from '../util';\n\n/**\n *  Rule for validating required fields.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction required(rule, value, source, errors, options, type) {\n  if (rule.required && (!source.hasOwnProperty(rule.field) || util.isEmptyValue(value, type))) {\n    errors.push(util.format(options.messages.required, rule.fullField));\n  }\n}\n\nexport default required;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/required.js","import * as util from '../util';\n\n/**\n *  Rule for validating whitespace.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction whitespace(rule, value, source, errors, options) {\n  if (/^\\s+$/.test(value) || value === '') {\n    errors.push(util.format(options.messages.whitespace, rule.fullField));\n  }\n}\n\nexport default whitespace;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/whitespace.js","import * as util from '../util';\nimport required from './required';\n\n/* eslint max-len:0 */\n\nconst pattern = {\n  email: /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/,\n  url: new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$', 'i'),\n  hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,\n};\n\nconst types = {\n  integer(value) {\n    return types.number(value) && parseInt(value, 10) === value;\n  },\n  float(value) {\n    return types.number(value) && !types.integer(value);\n  },\n  array(value) {\n    return Array.isArray(value);\n  },\n  regexp(value) {\n    if (value instanceof RegExp) {\n      return true;\n    }\n    try {\n      return !!new RegExp(value);\n    } catch (e) {\n      return false;\n    }\n  },\n  date(value) {\n    return typeof value.getTime === 'function' &&\n      typeof value.getMonth === 'function' &&\n      typeof value.getYear === 'function';\n  },\n  number(value) {\n    if (isNaN(value)) {\n      return false;\n    }\n    return typeof (value) === 'number';\n  },\n  object(value) {\n    return typeof (value) === 'object' && !types.array(value);\n  },\n  method(value) {\n    return typeof (value) === 'function';\n  },\n  email(value) {\n    return typeof (value) === 'string' && !!value.match(pattern.email);\n  },\n  url(value) {\n    return typeof (value) === 'string' && !!value.match(pattern.url);\n  },\n  hex(value) {\n    return typeof (value) === 'string' && !!value.match(pattern.hex);\n  },\n};\n\n/**\n *  Rule for validating the type of a value.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction type(rule, value, source, errors, options) {\n  if (rule.required && value === undefined) {\n    required(rule, value, source, errors, options);\n    return;\n  }\n  const custom = ['integer', 'float', 'array', 'regexp', 'object',\n    'method', 'email', 'number', 'date', 'url', 'hex'];\n  const ruleType = rule.type;\n  if (custom.indexOf(ruleType) > -1) {\n    if (!types[ruleType](value)) {\n      errors.push(util.format(options.messages.types[ruleType], rule.fullField, rule.type));\n    }\n    // straight typeof check\n  } else if (ruleType && typeof (value) !== rule.type) {\n    errors.push(util.format(options.messages.types[ruleType], rule.fullField, rule.type));\n  }\n}\n\nexport default type;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/type.js","import * as util from '../util';\n\n/**\n *  Rule for validating minimum and maximum allowed values.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction range(rule, value, source, errors, options) {\n  const len = typeof rule.len === 'number';\n  const min = typeof rule.min === 'number';\n  const max = typeof rule.max === 'number';\n  let val = value;\n  let key = null;\n  const num = typeof (value) === 'number';\n  const str = typeof (value) === 'string';\n  const arr = Array.isArray(value);\n  if (num) {\n    key = 'number';\n  } else if (str) {\n    key = 'string';\n  } else if (arr) {\n    key = 'array';\n  }\n  // if the value is not of a supported type for range validation\n  // the validation rule rule should use the\n  // type property to also test for a particular type\n  if (!key) {\n    return false;\n  }\n  if (str || arr) {\n    val = value.length;\n  }\n  if (len) {\n    if (val !== rule.len) {\n      errors.push(util.format(options.messages[key].len, rule.fullField, rule.len));\n    }\n  } else if (min && !max && val < rule.min) {\n    errors.push(util.format(options.messages[key].min, rule.fullField, rule.min));\n  } else if (max && !min && val > rule.max) {\n    errors.push(util.format(options.messages[key].max, rule.fullField, rule.max));\n  } else if (min && max && (val < rule.min || val > rule.max)) {\n    errors.push(util.format(options.messages[key].range,\n      rule.fullField, rule.min, rule.max));\n  }\n}\n\nexport default range;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/range.js","import * as util from '../util';\nconst ENUM = 'enum';\n\n/**\n *  Rule for validating a value exists in an enumerable list.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction enumerable(rule, value, source, errors, options) {\n  rule[ENUM] = Array.isArray(rule[ENUM]) ? rule[ENUM] : [];\n  if (rule[ENUM].indexOf(value) === -1) {\n    errors.push(util.format(options.messages[ENUM], rule.fullField, rule[ENUM].join(', ')));\n  }\n}\n\nexport default enumerable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/enum.js","import * as util from '../util';\n\n/**\n *  Rule for validating a regular expression pattern.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction pattern(rule, value, source, errors, options) {\n  if (rule.pattern instanceof RegExp) {\n    if (!rule.pattern.test(value)) {\n      errors.push(util.format(options.messages.pattern.mismatch,\n        rule.fullField, value, rule.pattern));\n    }\n  }\n}\n\nexport default pattern;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rule/pattern.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates a function.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction method(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default method;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/method.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates a number.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction number(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default number;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/number.js","import { isEmptyValue } from '../util';\nimport rules from '../rule/';\n\n/**\n *  Validates a boolean.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction boolean(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default boolean;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/boolean.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates the regular expression type.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction regexp(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (!isEmptyValue(value)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default regexp;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/regexp.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates a number is an integer.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction integer(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default integer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/integer.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates a number is a floating point number.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction floatFn(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default floatFn;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/float.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n/**\n *  Validates an array.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction array(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value, 'array') && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options, 'array');\n    if (!isEmptyValue(value, 'array')) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default array;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/array.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates an object.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction object(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default object;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/object.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\nconst ENUM = 'enum';\n\n/**\n *  Validates an enumerable list.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction enumerable(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (value) {\n      rules[ENUM](rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default enumerable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/enum.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\n/**\n *  Validates a regular expression pattern.\n *\n *  Performs validation when a rule only contains\n *  a pattern property but is not declared as a string type.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param callback The callback function.\n *  @param source The source object being validated.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\nfunction pattern(rule, value, callback, source, options) {\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (!isEmptyValue(value, 'string')) {\n      rules.pattern(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default pattern;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/pattern.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\nfunction type(rule, value, callback, source, options) {\n  const ruleType = rule.type;\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  if (validate) {\n    if (isEmptyValue(value, ruleType) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options, ruleType);\n    if (!isEmptyValue(value, ruleType)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n  callback(errors);\n}\n\nexport default type;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/type.js","import rules from '../rule/';\nimport { isEmptyValue } from '../util';\n\nfunction date(rule, value, callback, source, options) {\n  // console.log('integer rule called %j', rule);\n  const errors = [];\n  const validate = rule.required || (!rule.required && source.hasOwnProperty(rule.field));\n  // console.log('validate on %s value', value);\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n    rules.required(rule, value, source, errors, options);\n    if (!isEmptyValue(value)) {\n      rules.type(rule, value, source, errors, options);\n      if (value) {\n        rules.range(rule, value.getTime(), source, errors, options);\n      }\n    }\n  }\n  callback(errors);\n}\n\nexport default date;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/date.js","import rules from '../rule/';\n\nfunction required(rule, value, callback, source, options) {\n  const errors = [];\n  const type = Array.isArray(value) ? 'array' : typeof value;\n  rules.required(rule, value, source, errors, options, type);\n  callback(errors);\n}\n\nexport default required;\n\n\n\n// WEBPACK FOOTER //\n// ./src/validator/required.js","export function newMessages() {\n  return {\n    default: 'Validation error on field %s',\n    required: '%s is required',\n    enum: '%s must be one of %s',\n    whitespace: '%s cannot be empty',\n    date: {\n      format: '%s date %s is invalid for format %s',\n      parse: '%s date could not be parsed, %s is invalid ',\n      invalid: '%s date %s is invalid',\n    },\n    types: {\n      string: '%s is not a %s',\n      method: '%s is not a %s (function)',\n      array: '%s is not an %s',\n      object: '%s is not an %s',\n      number: '%s is not a %s',\n      date: '%s is not a %s',\n      boolean: '%s is not a %s',\n      integer: '%s is not an %s',\n      float: '%s is not a %s',\n      regexp: '%s is not a valid %s',\n      email: '%s is not a valid %s',\n      url: '%s is not a valid %s',\n      hex: '%s is not a valid %s',\n    },\n    string: {\n      len: '%s must be exactly %s characters',\n      min: '%s must be at least %s characters',\n      max: '%s cannot be longer than %s characters',\n      range: '%s must be between %s and %s characters',\n    },\n    number: {\n      len: '%s must equal %s',\n      min: '%s cannot be less than %s',\n      max: '%s cannot be greater than %s',\n      range: '%s must be between %s and %s',\n    },\n    array: {\n      len: '%s must be exactly %s in length',\n      min: '%s cannot be less than %s in length',\n      max: '%s cannot be greater than %s in length',\n      range: '%s must be between %s and %s in length',\n    },\n    pattern: {\n      mismatch: '%s value %s does not match pattern %s',\n    },\n    clone() {\n      const cloned = JSON.parse(JSON.stringify(this));\n      cloned.clone = this.clone;\n      return cloned;\n    },\n  };\n}\n\nexport const messages = newMessages();\n\n\n\n// WEBPACK FOOTER //\n// ./src/messages.js"],"sourceRoot":""}